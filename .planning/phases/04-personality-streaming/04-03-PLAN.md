# Phase 04 Plan 03: Web Interface

**Phase:** 4 of 4  
**Plan:** 03 of 03  
**Focus:** Live dashboard for agent activity  
**Estimated Duration:** 25 minutes

## Objective

Create a web interface that displays the agent's live activity, trade history, and stats in real-time.

## Must-Haves

**Truth 1:** Live feed of agent events
- Real-time event display
- Auto-scroll with pause option
- Color-coded by event type

**Truth 2:** Stats dashboard
- Win rate
- Total P&L
- Buybacks executed
- Circuit breaker status

**Truth 3:** Trade history
- Recent trades table
- Buy/sell indicators
- Profit/loss tracking

## Proposed Changes

### Directory Structure

```
public/
‚îú‚îÄ‚îÄ index.html       # Main dashboard
‚îú‚îÄ‚îÄ styles.css       # Dark terminal aesthetic
‚îî‚îÄ‚îÄ app.js           # WebSocket client + UI logic
```

### HTML Structure (`public/index.html`)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$SCHIZO - Paranoid AI Trader</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>$SCHIZO</h1>
    <p>Paranoid AI Trading Agent</p>
  </header>

  <main>
    <section id="stats">
      <div class="stat">
        <label>Win Rate</label>
        <span id="winRate">0%</span>
      </div>
      <div class="stat">
        <label>Total P&L</label>
        <span id="pnl">0 SOL</span>
      </div>
      <div class="stat">
        <label>Buybacks</label>
        <span id="buybacks">0</span>
      </div>
      <div class="stat">
        <label>Status</label>
        <span id="status">Active</span>
      </div>
    </section>

    <section id="feed-container">
      <h2>Live Feed</h2>
      <div id="feed"></div>
    </section>

    <section id="trades-container">
      <h2>Recent Trades</h2>
      <table id="trades">
        <thead>
          <tr>
            <th>Time</th>
            <th>Type</th>
            <th>Token</th>
            <th>Amount</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
```

### Styling (`public/styles.css`)

**Dark Terminal Aesthetic:**
- Background: #0a0a0a (near black)
- Primary text: #00ff00 (green terminal)
- Accent: #ffff00 (yellow for warnings)
- Error: #ff0000 (red for errors)
- Monospace font throughout

**Key Styles:**
```css
body {
  background: #0a0a0a;
  color: #00ff00;
  font-family: 'Courier New', monospace;
  margin: 0;
  padding: 20px;
}

#feed {
  height: 400px;
  overflow-y: auto;
  border: 1px solid #00ff00;
  padding: 10px;
  background: #000;
}

.event {
  padding: 8px;
  border-bottom: 1px solid #003300;
  animation: fadeIn 0.3s;
}

.event.trade { color: #ffff00; }
.event.buyback { color: #ff00ff; }
.event.error { color: #ff0000; }
```

### JavaScript (`public/app.js`)

**WebSocket Client:**
```javascript
const ws = new WebSocket('ws://localhost:8080');

ws.onopen = () => {
  console.log('Connected to $SCHIZO agent');
  updateStatus('Connected');
};

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  handleEvent(data);
};

ws.onerror = () => {
  updateStatus('Connection Error');
};

ws.onclose = () => {
  updateStatus('Disconnected');
};
```

**Event Handling:**
```javascript
function handleEvent(event) {
  switch (event.type) {
    case 'ANALYSIS_START':
      addToFeed(`üîç Analyzing ${event.data.mint.slice(0, 8)}...`);
      break;
    case 'TRADE_DECISION':
      const action = event.data.decision.shouldTrade ? 'TRADE' : 'SKIP';
      const reasoning = event.data.reasoning || 'No reasoning';
      addToFeed(`üí≠ ${action}: ${reasoning}`, 'trade');
      break;
    case 'TRADE_EXECUTED':
      addToFeed(`‚úÖ ${event.data.type} executed: ${event.data.amount} SOL`, 'trade');
      addToTradesTable(event.data);
      break;
    case 'BUYBACK_TRIGGERED':
      addToFeed(`üîÑ Buyback: ${event.data.amount} SOL`, 'buyback');
      updateBuybackCount();
      break;
  }
}
```

## Verification Plan

### Manual Testing

1. **Start WebSocket server**
2. **Open index.html in browser**
3. **Verify connection**
4. **Trigger agent actions**
5. **Verify events appear in feed**
6. **Verify stats update**

### Success Criteria

- ‚úÖ Feed updates in real-time
- ‚úÖ Events color-coded correctly
- ‚úÖ Stats display and update
- ‚úÖ Trade history populates
- ‚úÖ Auto-scroll works
- ‚úÖ Reconnection on disconnect

## Dependencies

- Plan 04-02: WebSocket server
- Modern browser with WebSocket support

## Implementation Notes

**Vanilla JS:**
- No framework needed for MVP
- Simple and fast
- Easy to iterate

**Future Enhancements:**
- Chart for P&L over time
- Token analysis visualization
- Wallet connection for user trades
- Mobile responsive design

---

*Ready for implementation.*
