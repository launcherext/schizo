---
phase: 01-foundation-security
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - src/index.ts
  - src/lib/logger.ts
  - .gitignore
  - .env.example
autonomous: true

must_haves:
  truths:
    - "Project compiles with TypeScript without errors"
    - "Logger redacts sensitive fields (privateKey, secretKey, password)"
    - "Development mode shows pretty-printed logs"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "@solana/web3.js"
    - path: "tsconfig.json"
      provides: "TypeScript configuration"
      contains: "strict"
    - path: "src/lib/logger.ts"
      provides: "Pino logger with secret redaction"
      exports: ["logger"]
  key_links:
    - from: "src/index.ts"
      to: "src/lib/logger.ts"
      via: "import"
      pattern: "import.*logger"
---

<objective>
Initialize TypeScript project with all Phase 1 dependencies and structured logging.

Purpose: Establish the project foundation that all other plans build upon. Pino logger with redaction ensures no secrets leak in logs from day one.

Output: Working TypeScript project that compiles, with configured logger ready for use by keystore, database, and API modules.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-security/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize TypeScript project with dependencies</name>
  <files>package.json, tsconfig.json, .gitignore, .env.example</files>
  <action>
    Create project root structure:

    1. Initialize package.json with:
       - name: "schizo-agent"
       - type: "module" (ESM)
       - scripts: build (tsc), start (node dist/index.js), dev (tsx src/index.ts)

    2. Install production dependencies:
       - @solana/web3.js@^1.95.8
       - bs58@^5.0.0
       - better-sqlite3@^11.0.0
       - bottleneck@^2.19.5
       - helius-sdk@^2.0.0
       - opossum@^8.1.3
       - p-retry@^6.2.0
       - pino@^9.0.0

    3. Install dev dependencies:
       - @types/better-sqlite3@^7.6.0
       - @types/node@^20.0.0
       - pino-pretty@^11.0.0
       - typescript@^5.0.0
       - tsx@^4.0.0

    4. Create tsconfig.json:
       - target: ES2022
       - module: NodeNext
       - moduleResolution: NodeNext
       - strict: true
       - outDir: ./dist
       - rootDir: ./src
       - esModuleInterop: true
       - skipLibCheck: true

    5. Create .gitignore:
       - node_modules/
       - dist/
       - *.db
       - *.db-wal
       - *.db-shm
       - .env
       - keystore.json

    6. Create .env.example:
       - HELIUS_API_KEY=your-api-key-here
       - LOG_LEVEL=info
       - NODE_ENV=development
  </action>
  <verify>
    npm install completes without errors
    npx tsc --noEmit reports no configuration errors
  </verify>
  <done>
    package.json has all dependencies listed
    tsconfig.json exists with strict mode enabled
    .gitignore excludes sensitive files
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Pino logger with secret redaction</name>
  <files>src/lib/logger.ts, src/index.ts</files>
  <action>
    Create src/lib/logger.ts:

    1. Import pino
    2. Configure logger with:
       - level from LOG_LEVEL env var, default 'info'
       - redact paths: privateKey, secretKey, password, masterPassword, apiKey, and nested variants (*.privateKey, *.secretKey, etc.)
       - censor value: '[REDACTED]'
       - transport: pino-pretty in development (NODE_ENV=development), JSON in production

    3. Export:
       - logger (main logger instance)
       - createLogger(module: string) function that returns child logger with module context

    Create src/index.ts:

    1. Import logger from './lib/logger.js'
    2. Log startup message: "Agent starting..."
    3. Test redaction by logging an object with privateKey field
    4. Log completion: "Agent initialized"

    Note: Use .js extension in imports (required for NodeNext module resolution)
  </action>
  <verify>
    npm run build compiles without errors
    npm run dev shows pretty-printed logs
    Log output shows [REDACTED] for privateKey field
  </verify>
  <done>
    src/lib/logger.ts exports logger and createLogger
    src/index.ts imports and uses logger
    Running agent shows redacted output for sensitive fields
  </done>
</task>

</tasks>

<verification>
1. Run `npm run build` - should complete with no errors
2. Run `npm run dev` - should show pretty-printed startup logs
3. Check log output for "[REDACTED]" where privateKey appears
4. Verify node_modules/ contains all dependencies
</verification>

<success_criteria>
- TypeScript project compiles successfully
- All Phase 1 dependencies installed
- Logger redacts sensitive fields
- Project structure ready for keystore, database, and API modules
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-security/01-01-SUMMARY.md`
</output>
